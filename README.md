# 语音情感陪伴 AI 助手

这是一个基于通义千问 API 开发的语音情感陪伴 AI 助手，支持实时语音识别、自然对话和语音合成功能。

## 功能特点

- 实时语音识别 (ASR)：使用通义千问的 paraformer-realtime-v2 模型
- 自然语言对话 (LLM)：使用通义千问的 qwen-plus 模型
- 语音合成 (TTS)：使用通义千问的 sambert-speech 模型
- 多角色选择：支持不同性格特点的 AI 角色
- 实时反馈：语音识别结果实时显示
- 连续对话：保持对话历史，实现上下文理解

## 安装要求

- Python 3.8+
- 通义千问 API 密钥
- 麦克风和音频输出设备

## 依赖安装

```bash
pip install -r requirements.txt
```

主要依赖包：

- dashscope>=1.10.0
- pyaudio>=0.2.11
- websockets>=11.0.3
- numpy>=1.24.0
- python-dotenv>=0.19.0

## 配置

1. 创建 `.env` 文件并添加你的 API 密钥：

```
DASHSCOPE_API_KEY=your_api_key_here
```

2. 确保系统已正确配置音频设备

## 使用方法

1. 运行程序：

```bash
python main.py
```

2. 选择对话角色：

- 小甜 - 26 岁 甜美可人的女友
- 雅雅 - 28 岁 优雅知性的女友
- 米米 - 25 岁 热情活力的女友
- 安娜 - 32 岁 成熟魅力的女友

3. 开始对话：

- 按回车开始新的对话
- 开始说话，实时查看识别结果
- 说完后按 Ctrl+C 结束当前语音输入
- 等待 AI 回应并听取语音回复
- 说"再见"结束整个对话

## 注意事项

1. 确保麦克风权限已开启
2. 保持网络连接稳定
3. 建议在安静的环境中使用
4. 每次语音输入可以按 Ctrl+C 手动结束

## 错误处理

- 如果遇到音频设备问题，请检查系统音频设置
- 如果遇到 API 错误，请确认 API 密钥是否正确
- 如果识别效果不佳，请尝试在更安静的环境中使用

## 开发者说明

项目结构：

```
.
├── main.py          # 主程序
├── requirements.txt # 依赖配置
├── .env            # 环境变量
└── README.md       # 说明文档
```

## 许可证

MIT License
